generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Cliente {
  id                       Int           @id @default(autoincrement())
  nome                     String
  endereco                 String
  numeroTelefone           String
  enderecoEmail            String
  password                 String
  outrasInformacoesContato String?
  veiculo                  Veiculo[]     @relation("veiculosDoCliente")
  agendamento              Agendamento[]
}

//mudar db sem ano do carro
model Veiculo {
  id             Int           @id @default(autoincrement())
  marca          String
  modelo         String
  placa          String
  proprietario   Cliente?      @relation("veiculosDoCliente", fields: [proprietarioId], references: [id])
  proprietarioId Int?
  agendamento    Agendamento[]
}

model Servico {
  id               Int           @id @default(autoincrement())
  descricaoServico String
  preco            Float
  duracaoEstimada  Int
  agendamentos     Agendamento[]
}

model Agendamento {
  id                  Int      @id @default(autoincrement())
  dataHoraAgendamento DateTime
  clienteId           Int
  veiculoId           Int
  servicoId           Int
  cliente             Cliente  @relation(fields: [clienteId], references: [id])
  veiculo             Veiculo  @relation(fields: [veiculoId], references: [id])
  servico             Servico  @relation(fields: [servicoId], references: [id])

  historicoServicos HistoricoServico[]
}

model HistoricoServico {
  id              Int         @id @default(autoincrement())
  dataHoraServico DateTime
  agendamentoId   Int
  statusServico   String
  agendamento     Agendamento @relation(fields: [agendamentoId], references: [id])
}

model FormaPagamento {
  id            Int     @id @default(autoincrement())
  tipoPagamento String
  detalhes      String?
}

model RelatorioFinanceiro {
  id            Int      @id @default(autoincrement())
  dataRelatorio DateTime
  totalReceitas Float
  totalDespesas Float
  lucroLiquido  Float
}
