generator client {
  provider = "prisma-client-js"

}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Cliente {
  id       Int      @id @default(autoincrement())
  nome     String
  endereco String
  telefone String
  email    String   @unique
  senha    String
  placa    String   @unique
  transacoes Transacao[]
  agendamentos Agendamento[]
}

model Servico {
  id              Int      @id @default(autoincrement())
  nome            String
  descricao       String
  preco           Decimal
  transacoes      Transacao[]
  agendamentos    Agendamento[] 
  }



model FormaDePagamento {
  id   Int      @id @default(autoincrement())
  nome String
  transacoes Transacao[]
  agendamentos Agendamento[]
}

model Transacao {
  id             Int      @id @default(autoincrement())
  clienteId      Int
  servicoId      Int
  formaPagamentoId Int
  dataTransacao  DateTime @default(now())
  valorTotal     Decimal
  cliente        Cliente  @relation(fields: [clienteId], references: [id])
  servico        Servico  @relation(fields: [servicoId], references: [id])
  formaPagamento FormaDePagamento @relation(fields: [formaPagamentoId], references: [id])
}

//resolver o horario inicial porque não está funcionando, muito provavel precisa dos dados do front pra pode armazenar isso ou sei lá

model Disponibilidade {
  id       Int       @id @default(autoincrement())
  data     DateTime  @default(now())
  horaIni  DateTime
  @@unique([horaIni]) 
}

model Agendamento {     
  id               Int       @id @default(autoincrement())
  clienteId        Int
  servicoId        Int
  formaPagamentoId Int
  dataTransacao    DateTime  @default(now())
  valorTotal       Decimal
    cliente          Cliente   @relation(fields: [clienteId], references: [id])
  servico          Servico   @relation(fields: [servicoId], references: [id])
  formaPagamento   FormaDePagamento @relation(fields: [formaPagamentoId], references: [id])
}


